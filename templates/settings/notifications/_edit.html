{% extends "_layouts/cp" %}
{% import "_includes/forms" as forms %}

{% if emailBlastType is defined %}
	{% set title = "Edit Notification" %}
	{% set emailBlastTypeId = emailBlastType.id %}
{% else %}
	{% set title = "Edit Notification" %}
	{% set emailBlastType = craft.sproutEmail.getEmailBlastTypeById(emailBlastTypeId) %}
	{% set emailBlastTypeId = emailBlastType.id %}	
{% endif %}

{% set crumbs = [
  { label: "Sprout Email"|t, url: url('sproutemail') },
  { label: "Settings"|t, url: url('sproutemail/settings') },
] %}

{% set tabs = {
    general: { 
      label: "Notification Info"|t,
      url: url('sproutemail/settings/notifications/edit/' ~ emailBlastTypeId),
      class: 'notificationinfo'
    },
    recipients:    { 
      label: "Recipients"|t,
      url: url('sproutemail/settings/notifications/edit/' ~ emailBlastTypeId ~ '/recipients'),
      class: 'recipients'
    },
    template:    { 
      label: "Fields"|t,
      url: url('sproutemail/settings/notifications/edit/' ~ emailBlastTypeId ~ '/fields'),
      class: 'template'
    },
} %}

{% if craft.request.getSegment('6') %}
    {% set selectedTab = craft.request.getSegment('6') %}
{% endif %}


{% set content %}

{% if craft.request.getSegment('6') == 'fields' %}
    {% include "sproutemail/settings/notifications/_tabs/fields" %}
{% elseif craft.request.getSegment('6') == 'recipients' %} 
    {% include "sproutemail/settings/notifications/_tabs/recipients" %}
{% else %}
    {% include "sproutemail/settings/notifications/_tabs/info" %}
{% endif %}

{% endset %}

{% includeJsResource "sproutemail/js/sproutemail.js" %}