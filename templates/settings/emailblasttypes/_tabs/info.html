
<form method="post" action="" accept-charset="UTF-8">
	<input type="hidden" name="action" value="sproutEmail/emailBlastType/save">
	<input type="hidden" name="redirect" value="sproutemail/emailblasts">
	<input type="hidden" name="id" value="{{ emailBlastTypeId }}">
	<input type="hidden" name="tab" value="info">
	<input type="hidden" name="continue" value="false">
	<input type="hidden" name="templateOption" value="3">

	<div id="tab-emailBlastType-info" class="tab-content" >

	{% set emailProviders = craft.sproutEmail.getEmailProviders(true) %}
	
	{% if emailProviders %}
	
		{{ forms.textField({
			label: "Email Blast Type Name"|t,
			id: 'name',
			name: 'name',
			instructions: "Human readable name for this type of Email Blast"|t,
			value: (emailBlastType is defined ? emailBlastType.name : null),
			autofocus: true,
			required: true,
			errors: (emailBlastType is defined ? emailBlastType.getErrors('name') : null) 	
		}) }}

		{{ forms.selectField({
			label: "How would you like to send this email"|t,
			id: 'emailProvider',
			name: 'emailProvider',
			instructions: "Select the platform you will use to send your Email Blasts."|t,
			options : emailProviders,
			value: (emailBlastType is defined ? emailBlastType.emailProvider : null),
			errors: (emailBlastType is defined ? emailBlastType.getErrors('emailProvider') : null)  
		}) }}
		
		{% for emailProvider in emailProviders %}
		   {% if craft.sproutEmail.getGeneralSettingsTemplate(emailProvider) %}
			<div id="{{ emailProvider }}-generalsettings-template" class="generalsettings"   >
				{% include "sproutemail/_services/" ~ emailProvider ~ "/generalEmailBlastTypeSettings" %}
			</div>
		   {% else %}
		   <div id="{{ emailProvider }}-generalsettings-template"  class="generalsettings"  >
				{% include "sproutemail/_partials/generalEmailBlastTypeSettings" %}
		   </div>
		   {% endif %}
		{% endfor %}
	
		</div>
		
		<div class="buttons">
			<input class="btn" type="submit" value="Save Info">
			<input class="btn submit save-and-continue" id="info" type="button" value="Save Info & Continue">
		</div>
	
	{% else %}
	
		<p>In order to set up an Email Blast Type, you must first provide valid API settings for one of the supported email service providers.</p>

		<ul>
			<li>Campaign Monitor</li>
			<li>MailChimp</li>
			<li>MailGun</li>
			<li>SendGrid</li>
		</ul>
		
		<p><a href="{{ url('sproutemail/settings') }}" >Set API Settings Now</a></p>
	
	{% endif %}
</form>

<hr>

<form method="post" action="" accept-charset="UTF-8">
	<input type="hidden" name="action" value="sproutEmail/emailBlastType/deleteEmailBlastType">
	<input type="hidden" name="redirect" value="sproutemail/emailblasts">
	<input type="hidden" name="id" value="{{ emailBlastTypeId }}">
	<input type="submit" class="btn small" value="Delete">
</form>