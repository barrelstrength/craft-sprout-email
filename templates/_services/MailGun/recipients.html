{% set campaigns = craft.sproutEmail.getCampaignList('MailGun') %}

    {% if(campaigns|length > 0) %}
    
        {{ forms.field({
            label: "Campaigns (optional)"|t,
            instructions: "Select a campaign to associate with this section."|t,
            errors: (campaign is defined ? campaign.getErrors('emailProviderRecipientListId') : null) ,
        }, forms.select({
            name: 'emailProviderRecipientListId[campaign]',
            options : campaigns,
            value: campaign is defined and campaign.emailProviderRecipientListId ? campaign.emailProviderRecipientListId|first : null
        })) }}
    
    {% endif %}

    <hr />

{% set mailing_list = craft.sproutEmail.getSubscriberList('MailGun') %}

{% if(mailing_list|length > 0) %}

    {{ forms.field({
        label: "Mailing Lists"|t,
        instructions: "Select one or more mailing lists to send your Email Blasts in this Section."|t,
        errors: (campaign is defined ? campaign.getErrors('emailProviderRecipientListId') : null) ,
    }, forms.checkboxGroup({
        name: 'emailProviderRecipientListId[list]',
        options : mailing_list,
        values: campaign is defined and campaign.emailProviderRecipientListId ? campaign.emailProviderRecipientListId : null
    })) }}

{% else %}
	
    <p class="recipients-not-defined" >
        {{ "You must first create a mailing list in your Mailgun account."|t }}
    </p>

{% endif %}

<hr />